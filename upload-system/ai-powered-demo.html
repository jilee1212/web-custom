<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– AI ê¸°ë°˜ ì›¹ì‚¬ì´íŠ¸ ìë™ ìƒì„± ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }

        .main-container {
            display: grid;
            grid-template-columns: 450px 1fr;
            height: 100vh;
            gap: 0;
        }

        .control-panel {
            background: white;
            overflow-y: auto;
            border-right: 1px solid #ddd;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .panel-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .panel-header h2 {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }

        .panel-header p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .panel-content {
            padding: 20px;
        }

        .section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section h3 {
            color: #333;
            margin-bottom: 12px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-indicator {
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-left: auto;
        }

        .status-checking { background: #feebc8; color: #744210; }
        .status-ready { background: #c6f6d5; color: #22543d; }
        .status-downloading { background: #bee3f8; color: #2c5282; }
        .status-error { background: #fed7d7; color: #742a2a; }
        .status-analyzing { background: #e9d8fd; color: #553c9a; }
        .status-completed { background: #c6f6d5; color: #22543d; }

        .upload-zone {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        .upload-zone:hover,
        .upload-zone.dragover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .upload-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin: 3px;
            transition: all 0.3s ease;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover { background: #5a67d8; transform: translateY(-1px); }
        .btn:disabled { background: #cbd5e0; cursor: not-allowed; transform: none; }
        .btn.success { background: #48bb78; }
        .btn.warning { background: #ed8936; }
        .btn.danger { background: #f56565; }

        .file-item {
            background: linear-gradient(90deg, #f8f9ff, #fff);
            border-left: 4px solid #667eea;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            font-size: 0.85rem;
            transition: transform 0.2s ease;
        }

        .file-item:hover {
            transform: translateX(2px);
        }

        .ai-analysis-result {
            background: linear-gradient(90deg, #e6fffa, #f0fff4);
            border-left: 4px solid #38b2ac;
            padding: 12px;
            margin: 8px 0;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .section-mapping {
            background: linear-gradient(90deg, #fef5e7, #fffaf0);
            border-left: 4px solid #ed8936;
            padding: 10px;
            margin: 6px 0;
            border-radius: 4px;
            font-size: 0.85rem;
        }

        .confidence-badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.7rem;
            margin-left: 5px;
        }

        .log-area {
            background: #2d3748;
            color: #e2e8f0;
            padding: 12px;
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            max-height: 150px;
            overflow-y: auto;
            border-radius: 6px;
            border: 1px solid #4a5568;
        }

        .log-entry {
            margin-bottom: 2px;
            opacity: 0;
            animation: fadeInLog 0.5s ease forwards;
        }

        @keyframes fadeInLog {
            to { opacity: 1; }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 12px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }

        .stat-number {
            font-size: 1.3rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #666;
            margin-top: 2px;
        }

        .progress-bar {
            background: #edf2f7;
            height: 6px;
            width: 100%;
            border-radius: 3px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 3px;
        }

        .preview-panel {
            background: white;
            display: flex;
            flex-direction: column;
        }

        .preview-header {
            background: #f8f9fa;
            padding: 12px 20px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .preview-header h3 {
            font-size: 1.1rem;
            color: #333;
        }

        .preview-controls {
            display: flex;
            gap: 8px;
        }

        .mini-btn {
            padding: 6px 10px;
            font-size: 0.75rem;
            margin: 0;
            width: auto;
        }

        .preview-frame {
            flex: 1;
            border: none;
            width: 100%;
        }

        .ai-status-card {
            background: linear-gradient(135deg, #e6fffa, #f0fff4);
            border: 1px solid #38b2ac;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 15px;
        }

        .model-info {
            font-size: 0.8rem;
            color: #2d3748;
            margin-top: 8px;
        }

        .download-progress {
            margin-top: 10px;
        }

        .service-preview, .team-preview {
            background: #f8f9ff;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            padding: 8px;
            margin: 4px 0;
            font-size: 0.8rem;
        }

        .service-preview h5, .team-preview h5 {
            color: #667eea;
            margin-bottom: 4px;
            font-size: 0.85rem;
        }

        #fileInput { display: none; }

        .spinning {
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- AI ì œì–´ íŒ¨ë„ -->
        <div class="control-panel">
            <div class="panel-header">
                <h2>ğŸ¤– AI ì›¹ì‚¬ì´íŠ¸ ìë™ ìƒì„±</h2>
                <p>Ollama ë¡œì»¬ AI + ìŠ¤ë§ˆíŠ¸ ë¶„ì„</p>
            </div>

            <div class="panel-content">
                <!-- AI ìƒíƒœ í™•ì¸ -->
                <div class="section">
                    <h3>
                        ğŸ”§ AI ì‹œìŠ¤í…œ ìƒíƒœ
                        <span class="status-indicator status-checking" id="aiStatus">í™•ì¸ ì¤‘...</span>
                    </h3>

                    <div class="ai-status-card" id="aiStatusCard">
                        <div><strong>ì—°ê²° ìƒíƒœ:</strong> <span id="connectionStatus">í™•ì¸ ì¤‘...</span></div>
                        <div><strong>ëª¨ë¸:</strong> <span id="modelStatus">-</span></div>
                        <div class="model-info" id="modelInfo">
                            Ollamaê°€ ì„¤ì¹˜ë˜ê³  ëª¨ë¸ì´ ë‹¤ìš´ë¡œë“œë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
                        </div>

                        <div style="margin-top: 12px;">
                            <button class="btn" onclick="checkAIStatus()">ğŸ”„ ìƒíƒœ í™•ì¸</button>
                            <button class="btn success" onclick="downloadModel()" id="downloadBtn" disabled>ğŸ“¥ ëª¨ë¸ ë‹¤ìš´ë¡œë“œ</button>
                        </div>

                        <div class="download-progress" id="downloadProgress" style="display: none;">
                            <div>ëª¨ë¸ ë‹¤ìš´ë¡œë“œ ì¤‘...</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="downloadProgressFill"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- íŒŒì¼ ì—…ë¡œë“œ -->
                <div class="section">
                    <h3>ğŸ“ íŒŒì¼ ì—…ë¡œë“œ</h3>
                    <div class="upload-zone" id="uploadZone">
                        <div class="upload-icon">â˜ï¸</div>
                        <div><strong>íŒŒì¼ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­</strong></div>
                        <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">
                            TXT, PDF, DOC, ì´ë¯¸ì§€, ë¹„ë””ì˜¤
                        </div>
                        <input type="file" id="fileInput" multiple accept=".txt,.pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.mp4,.webm">
                    </div>

                    <div style="margin-top: 12px;">
                        <button class="btn success" onclick="loadAdvancedSample()">ğŸ¢ ê³ ê¸‰ ë¹„ì¦ˆë‹ˆìŠ¤ ìƒ˜í”Œ</button>
                        <button class="btn" onclick="clearAll()">ğŸ—‘ï¸ ì „ì²´ ì´ˆê¸°í™”</button>
                    </div>

                    <div style="margin-top: 10px;">
                        <div style="font-size: 0.85rem; color: #666;">
                            ì—…ë¡œë“œëœ íŒŒì¼: <span id="fileCount">0</span>ê°œ
                        </div>
                        <div id="uploadedFilesList"></div>
                    </div>
                </div>

                <!-- AI ë¶„ì„ -->
                <div class="section">
                    <h3>
                        ğŸ§  AI ì»¨í…ì¸  ë¶„ì„
                        <span class="status-indicator status-ready" id="analysisStatus">ëŒ€ê¸° ì¤‘</span>
                    </h3>

                    <button class="btn" onclick="analyzeWithAI()" id="analyzeBtn" disabled>
                        ğŸš€ AI ë¶„ì„ ì‹œì‘
                    </button>

                    <div id="analysisResults"></div>

                    <div class="stats-grid" id="analysisStats" style="display: none;">
                        <div class="stat-card">
                            <div class="stat-number" id="statServices">0</div>
                            <div class="stat-label">ì„œë¹„ìŠ¤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statTeam">0</div>
                            <div class="stat-label">íŒ€ì›</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statImages">0</div>
                            <div class="stat-label">ì´ë¯¸ì§€</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="statConfidence">0%</div>
                            <div class="stat-label">ë¶„ì„ ì‹ ë¢°ë„</div>
                        </div>
                    </div>
                </div>

                <!-- AI ë¶„ì„ ê²°ê³¼ -->
                <div class="section">
                    <h3>ğŸ¯ AI ì„¹ì…˜ ë§¤í•‘</h3>
                    <div id="aiSectionResults"></div>
                </div>

                <!-- í…œí”Œë¦¿ ì ìš© -->
                <div class="section">
                    <h3>âœ¨ í…œí”Œë¦¿ ìƒì„±</h3>
                    <button class="btn warning" onclick="generateWithAI()" id="generateBtn" disabled>
                        ğŸ¨ AI ì›¹ì‚¬ì´íŠ¸ ìƒì„±
                    </button>

                    <div class="progress-bar" id="generateProgress" style="display: none;">
                        <div class="progress-fill" id="generateProgressFill"></div>
                    </div>

                    <div id="generateResults"></div>
                </div>

                <!-- AI ë¡œê·¸ -->
                <div class="section">
                    <h3>ğŸ“‹ AI ì‹¤í–‰ ë¡œê·¸</h3>
                    <div class="log-area" id="aiLogArea">
                        <div class="log-entry">[ì‹œìŠ¤í…œ] AI ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì¤‘...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- í…œí”Œë¦¿ ë¯¸ë¦¬ë³´ê¸° -->
        <div class="preview-panel">
            <div class="preview-header">
                <h3>ğŸ–¥ï¸ ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°</h3>
                <div class="preview-controls">
                    <button class="btn mini-btn" onclick="reloadPreview()">ğŸ”„</button>
                    <button class="btn mini-btn" onclick="openInNewWindow()">ğŸ”—</button>
                    <button class="btn mini-btn" onclick="downloadGenerated()">ğŸ’¾</button>
                </div>
            </div>

            <iframe id="previewFrame" class="preview-frame" src="../templates/modified/eventre-business-test/index.html"></iframe>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/ollama-ai-engine.js"></script>
    <script src="js/content-injector.js"></script>
    <script>
        // ì „ì—­ ë³€ìˆ˜
        let uploadedFiles = [];
        let aiAnalysisResults = null;
        let generatedHTML = null;
        let isAIReady = false;

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async () => {
            initializeEventListeners();
            await checkAIStatus();
            logMessage('ğŸ¤– AI ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');
        });

        function initializeEventListeners() {
            const uploadZone = document.getElementById('uploadZone');
            const fileInput = document.getElementById('fileInput');

            uploadZone.addEventListener('click', () => fileInput.click());
            uploadZone.addEventListener('dragover', handleDragOver);
            uploadZone.addEventListener('dragleave', handleDragLeave);
            uploadZone.addEventListener('drop', handleDrop);
            fileInput.addEventListener('change', handleFileSelect);
        }

        // AI ìƒíƒœ í™•ì¸
        async function checkAIStatus() {
            setAIStatus('checking', 'í™•ì¸ ì¤‘...');
            logMessage('ğŸ” AI ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì¤‘...');

            try {
                const status = await window.ollamaAI.getStatus();

                if (status.connected) {
                    setAIStatus('ready', 'ì—°ê²°ë¨');
                    document.getElementById('connectionStatus').textContent = 'âœ… ì—°ê²°ë¨';
                    document.getElementById('modelStatus').textContent = status.model;
                    document.getElementById('modelInfo').textContent = 'ë¡œì»¬ AIê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤. íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ë¶„ì„ì„ ì‹œì‘í•˜ì„¸ìš”.';

                    isAIReady = true;
                    updateButtonStates();
                    logMessage('âœ… Ollama AI ì—°ê²° ì„±ê³µ');
                } else {
                    setAIStatus('error', 'ì—°ê²° ì‹¤íŒ¨');
                    document.getElementById('connectionStatus').textContent = 'âŒ ì—°ê²° ì‹¤íŒ¨';
                    document.getElementById('modelStatus').textContent = 'ì—†ìŒ';
                    document.getElementById('modelInfo').textContent = status.error || 'Ollama ì„œë²„ë¥¼ ì‹œì‘í•˜ê³  ëª¨ë¸ì„ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.';
                    document.getElementById('downloadBtn').disabled = false;

                    logMessage('âŒ Ollama AI ì—°ê²° ì‹¤íŒ¨: ' + (status.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
                }
            } catch (error) {
                setAIStatus('error', 'ì˜¤ë¥˜');
                logMessage('âŒ AI ìƒíƒœ í™•ì¸ ì‹¤íŒ¨: ' + error.message);
            }
        }

        // ëª¨ë¸ ë‹¤ìš´ë¡œë“œ
        async function downloadModel() {
            setAIStatus('downloading', 'ë‹¤ìš´ë¡œë“œ ì¤‘...');
            document.getElementById('downloadProgress').style.display = 'block';
            document.getElementById('downloadBtn').disabled = true;

            logMessage('ğŸ“¥ AI ëª¨ë¸ ë‹¤ìš´ë¡œë“œ ì‹œì‘...');

            try {
                const result = await window.ollamaAI.downloadModel();

                if (result.success) {
                    setAIStatus('ready', 'ì¤€ë¹„ë¨');
                    document.getElementById('downloadProgress').style.display = 'none';
                    document.getElementById('modelInfo').textContent = 'ëª¨ë¸ ë‹¤ìš´ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!';

                    isAIReady = true;
                    updateButtonStates();
                    logMessage('âœ… ëª¨ë¸ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ');

                    // ì—°ê²° ìƒíƒœ ë‹¤ì‹œ í™•ì¸
                    setTimeout(() => checkAIStatus(), 2000);
                } else {
                    throw new Error(result.error);
                }
            } catch (error) {
                setAIStatus('error', 'ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨');
                document.getElementById('downloadProgress').style.display = 'none';
                document.getElementById('downloadBtn').disabled = false;
                logMessage('âŒ ëª¨ë¸ ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨: ' + error.message);
            }
        }

        // ê³ ê¸‰ ìƒ˜í”Œ ë¡œë“œ
        function loadAdvancedSample() {
            const advancedSamples = [
                createSampleFile('íšŒì‚¬ì†Œê°œ_ìƒì„¸.txt',
                    'í˜ì‹ ì†”ë£¨ì…˜ê¸°ì—… (Innovation Solutions Inc.)\n\n' +
                    'ìš°ë¦¬ëŠ” 2010ë…„ì— ì„¤ë¦½ëœ IT ì†”ë£¨ì…˜ ì „ë¬¸ ê¸°ì—…ìœ¼ë¡œ, ë””ì§€í„¸ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ì„ í†µí•´ ê³ ê°ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ê³µì„ ì´ëŒê³  ìˆìŠµë‹ˆë‹¤.\n\n' +
                    'ë¹„ì „: ìµœì²¨ë‹¨ ê¸°ìˆ ê³¼ ì°½ì˜ì  ì‚¬ê³ ë¡œ ê³ ê°ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì„±ê³µì„ ì´ë„ëŠ” ê¸€ë¡œë²Œ ì„ ë„ ê¸°ì—…\n\n' +
                    'ë¯¸ì…˜:\n' +
                    '- ê³ ê° ì¤‘ì‹¬ì˜ ë§ì¶¤í˜• ì†”ë£¨ì…˜ ì œê³µ\n' +
                    '- ì§€ì†ì ì¸ ê¸°ìˆ  í˜ì‹ ê³¼ ì—°êµ¬ê°œë°œ\n' +
                    '- ì‚¬íšŒì  ì±…ì„ì„ ë‹¤í•˜ëŠ” ê¸°ì—… ê²½ì˜\n' +
                    '- ì§ì› ì„±ì¥ê³¼ í–‰ë³µí•œ ì¼í„° ì¡°ì„±'
                ),

                createSampleFile('í•µì‹¬ì„œë¹„ìŠ¤_ëª©ë¡.txt',
                    'í˜ì‹ ì†”ë£¨ì…˜ê¸°ì—… í•µì‹¬ ì„œë¹„ìŠ¤\n\n' +
                    '1. ë””ì§€í„¸ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ ì»¨ì„¤íŒ…\n' +
                    '   - ê¸°ì—…ì˜ ë””ì§€ï¿½ ì „í™˜ ì „ëµ ìˆ˜ë¦½ ë° ì‹¤í–‰\n' +
                    '   - ì—…ë¬´ í”„ë¡œì„¸ìŠ¤ í˜ì‹  ë° ìë™í™”\n' +
                    '   - ìµœì ì˜ ê¸°ìˆ  ì†”ë£¨ì…˜ ë„ì… ì§€ì›\n' +
                    '   - ë³€í™” ê´€ë¦¬ ë° ì§ì› êµìœ¡ í”„ë¡œê·¸ë¨\n\n' +
                    '2. í´ë¼ìš°ë“œ ì†”ë£¨ì…˜\n' +
                    '   - AWS, Azure, GCP ê¸°ë°˜ í´ë¼ìš°ë“œ ì•„í‚¤í…ì²˜ ì„¤ê³„\n' +
                    '   - ê¸°ì¡´ ì‹œìŠ¤í…œì˜ í´ë¼ìš°ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜\n' +
                    '   - 24/7 í´ë¼ìš°ë“œ ìš´ì˜ ë° ëª¨ë‹ˆí„°ë§\n' +
                    '   - ë³´ì•ˆ ë° ë°±ì—… ì†”ë£¨ì…˜ ì œê³µ\n\n' +
                    '3. AI/ML ì†”ë£¨ì…˜\n' +
                    '   - ë§ì¶¤í˜• ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ ê°œë°œ ë° ë°°í¬\n' +
                    '   - ìì—°ì–´ ì²˜ë¦¬ ë° ì´ë¯¸ì§€ ì¸ì‹ ì‹œìŠ¤í…œ\n' +
                    '   - ì˜ˆì¸¡ ë¶„ì„ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ì¸í…”ë¦¬ì „ìŠ¤\n' +
                    '   - ì±—ë´‡ ë° ìë™í™” ì†”ë£¨ì…˜ êµ¬ì¶•\n\n' +
                    '4. ì‚¬ì´ë²„ ë³´ì•ˆ ì†”ë£¨ì…˜\n' +
                    '   - ì¢…í•©ì ì¸ ë³´ì•ˆ ì»¨ì„¤íŒ… ë° ì§„ë‹¨\n' +
                    '   - ì¹¨ì… íƒì§€ ë° ëŒ€ì‘ ì‹œìŠ¤í…œ êµ¬ì¶•\n' +
                    '   - ë°ì´í„° ì•”í˜¸í™” ë° ì ‘ê·¼ ì œì–´\n' +
                    '   - ë³´ì•ˆ êµìœ¡ ë° ì¸ì‹ ê°œì„  í”„ë¡œê·¸ë¨'
                ),

                createSampleFile('íŒ€êµ¬ì„±ì›_ìƒì„¸.txt',
                    'í˜ì‹ ì†”ë£¨ì…˜ê¸°ì—… í•µì‹¬ ì¸ì¬\n\n' +
                    'ê¹€í˜ì‹  (ëŒ€í‘œì´ì‚¬ / CEO)\n' +
                    '- ì„œìš¸ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ê³¼ ì¡¸ì—…\n' +
                    '- ì‚¼ì„±ì „ì ì†Œí”„íŠ¸ì›¨ì–´ì„¼í„° 15ë…„ ê·¼ë¬´\n' +
                    '- í´ë¼ìš°ë“œ ë° AI ë¶„ì•¼ ì „ë¬¸ê°€\n' +
                    '- ë‹¤ìˆ˜ì˜ ë””ì§€í„¸ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ í”„ë¡œì íŠ¸ ì„±ê³µ ì´ë”\n\n' +
                    'ë°•ê¸°ìˆ  (ìµœê³ ê¸°ìˆ ì±…ì„ì / CTO)\n' +
                    '- KAIST ì „ì‚°í•™ê³¼ ë°•ì‚¬\n' +
                    '- êµ¬ê¸€ ì½”ë¦¬ì•„ ìˆ˜ì„ ì—”ì§€ë‹ˆì–´ ì¶œì‹ \n' +
                    '- ë¨¸ì‹ ëŸ¬ë‹ ë° ë¹…ë°ì´í„° ë¶„ì•¼ 10ë…„ ê²½ë ¥\n' +
                    '- êµ­ì œ í•™ìˆ ì§€ ë…¼ë¬¸ 20í¸ ì´ìƒ ë°œí‘œ\n\n' +
                    'ì´ë³´ì•ˆ (ë³´ì•ˆë‹´ë‹¹ ì´ì‚¬)\n' +
                    '- ê³ ë ¤ëŒ€í•™êµ ì •ë³´ë³´í˜¸í•™ê³¼ ì¡¸ì—…\n' +
                    '- êµ­ì •ì› ì‚¬ì´ë²„ë³´ì•ˆì„¼í„° 8ë…„ ê·¼ë¬´\n' +
                    '- CISSP, CISA ë“± êµ­ì œ ë³´ì•ˆ ìê²©ì¦ ë³´ìœ \n' +
                    '- ì •ë¶€ ë° ëŒ€ê¸°ì—… ë³´ì•ˆ ì»¨ì„¤íŒ… ë‹¤ìˆ˜ ìˆ˜í–‰\n\n' +
                    'ì •í´ë¼ìš°ë“œ (í´ë¼ìš°ë“œ íŒ€ì¥)\n' +
                    '- ì—°ì„¸ëŒ€í•™êµ ì „ìê³µí•™ê³¼ ì¡¸ì—…\n' +
                    '- AWS ì†”ë£¨ì…˜ ì•„í‚¤í…íŠ¸ í”„ë¡œí˜ì…”ë„\n' +
                    '- Azure ë° GCP ì „ë¬¸ê°€ ì¸ì¦ ë³´ìœ \n' +
                    '- ëŒ€ê¸°ì—… í´ë¼ìš°ë“œ ì „í™˜ í”„ë¡œì íŠ¸ 50ê°œ ì´ìƒ ì„±ê³µ\n\n' +
                    'ìµœì»¨ì„¤íŒ… (ì „ëµê¸°íš íŒ€ì¥)\n' +
                    '- ì„œê°•ëŒ€í•™êµ ê²½ì˜í•™ê³¼, MBA\n' +
                    '- McKinsey & Company ì»¨ì„¤í„´íŠ¸ 7ë…„\n' +
                    '- ë””ì§€í„¸ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ ì „ëµ ìˆ˜ë¦½ ì „ë¬¸ê°€\n' +
                    '- êµ­ë‚´ì™¸ ë‹¤ì–‘í•œ ì‚°ì—…êµ°ì˜ í˜ì‹  í”„ë¡œì íŠ¸ ê²½í—˜'
                ),

                createSampleFile('ì—°ë½ì²˜_ì •ë³´.txt',
                    'í˜ì‹ ì†”ë£¨ì…˜ê¸°ì—… ì—°ë½ì²˜\n\n' +
                    'ë³¸ì‚¬ ì£¼ì†Œ: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123, í˜ì‹ íƒ€ì›Œ 15ì¸µ (06234)\n' +
                    'ëŒ€í‘œ ì „í™”: 02-1234-5678\n' +
                    'íŒ©ìŠ¤: 02-1234-5679\n' +
                    'ëŒ€í‘œ ì´ë©”ì¼: contact@innovation-solutions.co.kr\n' +
                    'ê¸°ìˆ  ë¬¸ì˜: tech@innovation-solutions.co.kr\n' +
                    'ì˜ì—… ë¬¸ì˜: sales@innovation-solutions.co.kr\n' +
                    'ì±„ìš© ë¬¸ì˜: careers@innovation-solutions.co.kr\n\n' +
                    'ì›¹ì‚¬ì´íŠ¸: https://www.innovation-solutions.co.kr\n' +
                    'ë¸”ë¡œê·¸: https://blog.innovation-solutions.co.kr\n' +
                    'LinkedIn: https://linkedin.com/company/innovation-solutions\n\n' +
                    'ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 123-45-67890\n' +
                    'ëŒ€í‘œì´ì‚¬: ê¹€í˜ì‹ \n\n' +
                    'ìš´ì˜ì‹œê°„:\n' +
                    '- í‰ì¼: 09:00 ~ 18:00\n' +
                    '- í† ìš”ì¼: 09:00 ~ 13:00 (ê²©ì£¼)\n' +
                    '- ì¼ìš”ì¼ ë° ê³µíœ´ì¼: íœ´ë¬´\n\n' +
                    'ê³ ê°ì§€ì›ì„¼í„°: 1588-1234 (í‰ì¼ 09:00 ~ 18:00)'
                )
            ];

            uploadedFiles = [...uploadedFiles, ...advancedSamples];
            updateFilesList();
            updateButtonStates();
            logMessage('ğŸ¢ ê³ ê¸‰ ë¹„ì¦ˆë‹ˆìŠ¤ ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ ì™„ë£Œ (4ê°œ íŒŒì¼)');
        }

        // AI ë¶„ì„ ì‹¤í–‰
        async function analyzeWithAI() {
            if (!isAIReady) {
                alert('AI ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            if (uploadedFiles.length === 0) {
                alert('ë¨¼ì € íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”.');
                return;
            }

            setAnalysisStatus('analyzing', 'ë¶„ì„ ì¤‘...');
            document.getElementById('analyzeBtn').disabled = true;
            logMessage('ğŸ§  AI ì»¨í…ì¸  ë¶„ì„ ì‹œì‘...');

            try {
                aiAnalysisResults = await window.ollamaAI.analyzeContentWithAI(uploadedFiles);

                displayAIAnalysisResults(aiAnalysisResults);
                setAnalysisStatus('completed', 'ë¶„ì„ ì™„ë£Œ');
                document.getElementById('generateBtn').disabled = false;

                logMessage('âœ… AI ë¶„ì„ ì™„ë£Œ - ' + (aiAnalysisResults.analysisLog?.length || 0) + 'ê°œ í•­ëª© ì²˜ë¦¬ë¨');

            } catch (error) {
                setAnalysisStatus('error', 'ë¶„ì„ ì‹¤íŒ¨');
                logMessage('âŒ AI ë¶„ì„ ì‹¤íŒ¨: ' + error.message);
                alert('AI ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                document.getElementById('analyzeBtn').disabled = false;
            }
        }

        // AI ë¶„ì„ ê²°ê³¼ í‘œì‹œ
        function displayAIAnalysisResults(results) {
            // í†µê³„ ì—…ë°ì´íŠ¸
            document.getElementById('statServices').textContent = results.services?.length || 0;
            document.getElementById('statTeam').textContent = results.team?.length || 0;
            document.getElementById('statImages').textContent = Object.values(results.images || {}).flat().length;
            document.getElementById('statConfidence').textContent = Math.round((results.hero?.confidence || 0) * 100) + '%';
            document.getElementById('analysisStats').style.display = 'grid';

            // ë¶„ì„ ê²°ê³¼ ìƒì„¸ í‘œì‹œ
            let resultHTML = `
                <div class="ai-analysis-result">
                    <strong>ğŸ¢ íšŒì‚¬ëª…:</strong> ${results.company?.name || 'ë¯¸ê°ì§€'}<br>
                    <strong>ğŸ¯ ë©”ì¸ ë©”ì‹œì§€:</strong> ${results.hero?.title ? 'âœ… ' + results.hero.title : 'âŒ ë¯¸ê°ì§€'}<br>
                    <strong>ğŸ“ ì„¤ëª… í…ìŠ¤íŠ¸:</strong> ${results.hero?.text ? 'âœ… ìƒì„±ë¨' : 'âŒ ì—†ìŒ'}<br>
                    <strong>âš™ï¸ ì„œë¹„ìŠ¤:</strong> ${results.services?.length || 0}ê°œ ì¶”ì¶œ<br>
                    <strong>ğŸ‘¥ íŒ€ì›:</strong> ${results.team?.length || 0}ëª… ì‹ë³„<br>
                    <strong>ğŸ“ ì—°ë½ì²˜:</strong> ${(results.contact?.phone || results.contact?.email) ? 'âœ… ì¶”ì¶œë¨' : 'âŒ ì—†ìŒ'}
                </div>
            `;

            if (results.analysisLog?.length > 0) {
                resultHTML += `
                    <div style="margin-top: 10px; font-size: 0.8rem; color: #666;">
                        <strong>ë¶„ì„ ë¡œê·¸:</strong><br>
                        ${results.analysisLog.map(log => `â€¢ ${log}`).join('<br>')}
                    </div>
                `;
            }

            document.getElementById('analysisResults').innerHTML = resultHTML;

            // ì„¹ì…˜ë³„ ë§¤í•‘ ê²°ê³¼ í‘œì‹œ
            displayAISectionMapping(results);
        }

        function displayAISectionMapping(results) {
            let mappingHTML = '';

            // Hero ì„¹ì…˜
            if (results.hero?.title) {
                mappingHTML += `
                    <div class="section-mapping">
                        <strong>ğŸ  ë©”ì¸ ì„¹ì…˜</strong>
                        <span class="confidence-badge">${Math.round((results.hero.confidence || 0) * 100)}%</span><br>
                        <div style="font-size: 0.8rem; margin-top: 4px;">
                            ì œëª©: ${results.hero.title}<br>
                            ì„¤ëª…: ${results.hero.text?.substring(0, 100)}...
                        </div>
                    </div>
                `;
            }

            // Services ì„¹ì…˜
            if (results.services?.length > 0) {
                mappingHTML += `
                    <div class="section-mapping">
                        <strong>âš™ï¸ ì„œë¹„ìŠ¤ ì„¹ì…˜</strong>
                        <span class="confidence-badge">${results.services.length}ê°œ</span><br>
                        <div style="margin-top: 6px;">
                `;

                results.services.slice(0, 3).forEach(service => {
                    mappingHTML += `
                        <div class="service-preview">
                            <h5>${service.title}</h5>
                            <div>${service.description?.substring(0, 80)}...</div>
                        </div>
                    `;
                });

                mappingHTML += `</div></div>`;
            }

            // Team ì„¹ì…˜
            if (results.team?.length > 0) {
                mappingHTML += `
                    <div class="section-mapping">
                        <strong>ğŸ‘¥ íŒ€ ì„¹ì…˜</strong>
                        <span class="confidence-badge">${results.team.length}ëª…</span><br>
                        <div style="margin-top: 6px;">
                `;

                results.team.slice(0, 3).forEach(member => {
                    mappingHTML += `
                        <div class="team-preview">
                            <h5>${member.name} - ${member.position}</h5>
                            <div>${member.description?.substring(0, 60)}...</div>
                        </div>
                    `;
                });

                mappingHTML += `</div></div>`;
            }

            // Contact ì„¹ì…˜
            if (results.contact?.phone || results.contact?.email || results.contact?.address) {
                mappingHTML += `
                    <div class="section-mapping">
                        <strong>ğŸ“ ì—°ë½ì²˜ ì„¹ì…˜</strong><br>
                        <div style="font-size: 0.8rem; margin-top: 4px;">
                            ${results.contact.phone ? `ì „í™”: ${results.contact.phone}<br>` : ''}
                            ${results.contact.email ? `ì´ë©”ì¼: ${results.contact.email}<br>` : ''}
                            ${results.contact.address ? `ì£¼ì†Œ: ${results.contact.address.substring(0, 50)}...` : ''}
                        </div>
                    </div>
                `;
            }

            document.getElementById('aiSectionResults').innerHTML = mappingHTML || '<div style="color: #666;">ë§¤ì¹­ëœ ì„¹ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
        }

        // AIë¡œ ì›¹ì‚¬ì´íŠ¸ ìƒì„±
        async function generateWithAI() {
            if (!aiAnalysisResults) {
                alert('ë¨¼ì € AI ë¶„ì„ì„ ìˆ˜í–‰í•˜ì„¸ìš”.');
                return;
            }

            document.getElementById('generateBtn').disabled = true;
            document.getElementById('generateProgress').style.display = 'block';
            logMessage('ğŸ¨ AI ì›¹ì‚¬ì´íŠ¸ ìƒì„± ì‹œì‘...');

            try {
                updateGenerateProgress(20);

                // í˜„ì¬ í…œí”Œë¦¿ HTML ê°€ì ¸ì˜¤ê¸°
                const templateHTML = await fetchTemplateHTML();
                updateGenerateProgress(40);

                // AI ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì»¨í…ì¸  ì£¼ì…
                const injectionResult = await window.contentInjector.injectContent(templateHTML, uploadedFiles);
                updateGenerateProgress(70);

                // AI ë¶„ì„ ê²°ê³¼ë¥¼ ì¶”ê°€ë¡œ ì ìš©
                let finalHTML = injectionResult.html;
                if (aiAnalysisResults.hero?.title) {
                    finalHTML = applyAIResults(finalHTML, aiAnalysisResults);
                }

                updateGenerateProgress(90);

                generatedHTML = finalHTML;
                displayGeneratedWebsite(generatedHTML);
                updateGenerateProgress(100);

                document.getElementById('generateResults').innerHTML = `
                    <div class="ai-analysis-result">
                        <strong>âœ… AI ì›¹ì‚¬ì´íŠ¸ ìƒì„± ì™„ë£Œ!</strong><br>
                        íšŒì‚¬ëª…: ${aiAnalysisResults.company?.name || 'ë¯¸ì ìš©'}<br>
                        ì„œë¹„ìŠ¤: ${aiAnalysisResults.services?.length || 0}ê°œ ì ìš©<br>
                        íŒ€ì›: ${aiAnalysisResults.team?.length || 0}ëª… ì ìš©<br>
                        ë¶„ì„ ì‹ ë¢°ë„: ${Math.round((aiAnalysisResults.hero?.confidence || 0) * 100)}%
                    </div>
                `;

                logMessage('âœ… AI ì›¹ì‚¬ì´íŠ¸ ìƒì„± ì™„ë£Œ!');

            } catch (error) {
                logMessage('âŒ ì›¹ì‚¬ì´íŠ¸ ìƒì„± ì‹¤íŒ¨: ' + error.message);
                alert('ì›¹ì‚¬ì´íŠ¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                document.getElementById('generateBtn').disabled = false;
                setTimeout(() => {
                    document.getElementById('generateProgress').style.display = 'none';
                }, 1000);
            }
        }

        // AI ê²°ê³¼ë¥¼ HTMLì— ì¶”ê°€ ì ìš©
        function applyAIResults(html, aiResults) {
            // íšŒì‚¬ëª… ì „ì—­ êµì²´
            if (aiResults.company?.name) {
                html = html.replace(/Eventre|Business Solutions Conference/g, aiResults.company.name);
            }

            // Hero ì„¹ì…˜ì˜ ì œëª©ê³¼ í…ìŠ¤íŠ¸ êµì²´
            if (aiResults.hero?.title) {
                html = html.replace(
                    /<h1[^>]*class="[^"]*banner-title[^"]*"[^>]*>[\s\S]*?<\/h1>/gi,
                    `<h1 class="banner-title">${aiResults.hero.title}</h1>`
                );
            }

            if (aiResults.hero?.text) {
                html = html.replace(
                    /<p[^>]*class="[^"]*banner-text[^"]*"[^>]*>[\s\S]*?<\/p>/gi,
                    `<p class="banner-text">${aiResults.hero.text}</p>`
                );
            }

            // ì„œë¹„ìŠ¤ ì„¹ì…˜ ë™ì  ìƒì„±
            if (aiResults.services?.length > 0) {
                const servicesHTML = aiResults.services.slice(0, 6).map(service => `
                    <div class="col-lg-4 col-md-6">
                        <div class="feature-item text-center">
                            <i class="fa fa-cogs"></i>
                            <h4>${service.title}</h4>
                            <p>${service.description}</p>
                            ${service.features ? `<ul style="font-size: 0.9em; color: #666;">${service.features.slice(0, 3).map(f => `<li>${f}</li>`).join('')}</ul>` : ''}
                        </div>
                    </div>
                `).join('');

                // ê¸°ì¡´ ì„œë¹„ìŠ¤ ì„¹ì…˜ êµì²´
                html = html.replace(
                    /(<div[^>]*class="[^"]*row[^"]*"[^>]*>)([\s\S]*?)(<\/div>)/gi,
                    (match, openTag, content, closeTag) => {
                        if (match.includes('feature-item') || match.includes('service')) {
                            return openTag + servicesHTML + closeTag;
                        }
                        return match;
                    }
                );
            }

            return html;
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function setAIStatus(type, text) {
            const statusEl = document.getElementById('aiStatus');
            statusEl.className = `status-indicator status-${type}`;
            statusEl.textContent = text;

            if (type === 'checking') statusEl.classList.add('pulse');
            else statusEl.classList.remove('pulse');
        }

        function setAnalysisStatus(type, text) {
            const statusEl = document.getElementById('analysisStatus');
            statusEl.className = `status-indicator status-${type}`;
            statusEl.textContent = text;

            if (type === 'analyzing') statusEl.classList.add('spinning');
            else statusEl.classList.remove('spinning');
        }

        function updateButtonStates() {
            document.getElementById('analyzeBtn').disabled = !(isAIReady && uploadedFiles.length > 0);
            document.getElementById('generateBtn').disabled = !aiAnalysisResults;
        }

        function updateGenerateProgress(percent) {
            document.getElementById('generateProgressFill').style.width = `${percent}%`;
        }

        async function fetchTemplateHTML() {
            const response = await fetch('../templates/modified/eventre-business-test/index.html');
            if (!response.ok) throw new Error('í…œí”Œë¦¿ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return await response.text();
        }

        function displayGeneratedWebsite(html) {
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            document.getElementById('previewFrame').src = url;
            setTimeout(() => URL.revokeObjectURL(url), 5000);
        }

        function logMessage(message) {
            const logArea = document.getElementById('aiLogArea');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.textContent = `[${timestamp}] ${message}`;
            logArea.appendChild(logEntry);
            logArea.scrollTop = logArea.scrollHeight;
        }

        // íŒŒì¼ ì²˜ë¦¬ í•¨ìˆ˜ë“¤ (ê¸°ì¡´ê³¼ ë™ì¼)
        function handleDragOver(e) {
            e.preventDefault();
            document.getElementById('uploadZone').classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            document.getElementById('uploadZone').classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            document.getElementById('uploadZone').classList.remove('dragover');
            const files = Array.from(e.dataTransfer.files);
            processFiles(files);
        }

        function handleFileSelect(e) {
            const files = Array.from(e.target.files);
            processFiles(files);
        }

        async function processFiles(files) {
            for (const file of files) {
                try {
                    const processedFile = await processFile(file);
                    uploadedFiles.push(processedFile);
                } catch (error) {
                    logMessage(`âŒ ${file.name} ì²˜ë¦¬ ì‹¤íŒ¨: ${error.message}`);
                }
            }
            updateFilesList();
            updateButtonStates();
            logMessage(`ğŸ“ ${files.length}ê°œ íŒŒì¼ ì²˜ë¦¬ ì™„ë£Œ`);
        }

        async function processFile(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                const result = {
                    id: Date.now() + '_' + Math.random().toString(36).substr(2, 5),
                    name: file.name,
                    size: file.size,
                    type: detectFileType(file.name),
                    content: null
                };

                if (file.type.startsWith('text/')) {
                    reader.onload = (e) => {
                        result.content = { type: 'text', text: e.target.result };
                        resolve(result);
                    };
                    reader.readAsText(file);
                } else if (file.type.startsWith('image/')) {
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => {
                            result.content = {
                                type: 'image',
                                dataUrl: e.target.result,
                                dimensions: { width: img.width, height: img.height },
                                aspectRatio: img.width / img.height
                            };
                            resolve(result);
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                } else {
                    result.content = { type: 'document', text: `[${file.name}]` };
                    resolve(result);
                }

                reader.onerror = () => reject(new Error('íŒŒì¼ ì½ê¸° ì‹¤íŒ¨'));
            });
        }

        function createSampleFile(name, content) {
            return {
                id: 'sample_' + Date.now() + '_' + Math.random().toString(36).substr(2, 5),
                name: name,
                size: content.length,
                type: 'document',
                content: { type: 'text', text: content }
            };
        }

        function detectFileType(fileName) {
            const ext = fileName.toLowerCase().split('.').pop();
            if (['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(ext)) return 'image';
            if (['mp4', 'webm', 'ogg', 'avi', 'mov'].includes(ext)) return 'video';
            if (['txt', 'pdf', 'doc', 'docx'].includes(ext)) return 'document';
            return 'unknown';
        }

        function updateFilesList() {
            document.getElementById('fileCount').textContent = uploadedFiles.length;
            document.getElementById('uploadedFilesList').innerHTML = uploadedFiles.map(file => `
                <div class="file-item">
                    ${getFileIcon(file.type)} ${file.name} (${formatFileSize(file.size)})
                </div>
            `).join('');
        }

        function getFileIcon(type) {
            const icons = { document: 'ğŸ“„', image: 'ğŸ–¼ï¸', video: 'ğŸ¥', unknown: 'ğŸ“' };
            return icons[type] || icons.unknown;
        }

        function formatFileSize(bytes) {
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            if (bytes === 0) return '0 Bytes';
            const i = Math.floor(Math.log(bytes) / Math.log(1024));
            return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];
        }

        function clearAll() {
            uploadedFiles = [];
            aiAnalysisResults = null;
            generatedHTML = null;
            updateFilesList();
            updateButtonStates();
            document.getElementById('analysisResults').innerHTML = '';
            document.getElementById('analysisStats').style.display = 'none';
            document.getElementById('aiSectionResults').innerHTML = '';
            document.getElementById('generateResults').innerHTML = '';
            setAnalysisStatus('ready', 'ëŒ€ê¸° ì¤‘');
            logMessage('ğŸ—‘ï¸ ëª¨ë“  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        function reloadPreview() {
            const frame = document.getElementById('previewFrame');
            const currentSrc = frame.src;
            frame.src = '';
            setTimeout(() => frame.src = currentSrc, 100);
        }

        function openInNewWindow() {
            if (generatedHTML) {
                const newWindow = window.open();
                newWindow.document.write(generatedHTML);
                newWindow.document.close();
            } else {
                window.open('../templates/modified/eventre-business-test/index.html', '_blank');
            }
        }

        function downloadGenerated() {
            if (!generatedHTML) {
                alert('ë¨¼ì € ì›¹ì‚¬ì´íŠ¸ë¥¼ ìƒì„±í•˜ì„¸ìš”.');
                return;
            }

            const blob = new Blob([generatedHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ai-generated-website.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            logMessage('ğŸ’¾ AI ìƒì„± ì›¹ì‚¬ì´íŠ¸ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ');
        }
    </script>
</body>
</html>